## 1.数据库基本概念

![image-20240914093528632](https://s2.loli.net/2024/09/18/7eso9J32DwvXF8k.png)

### 考点1：数据库系统体系结构

集中式数据库系统

* 数据是集中的
* 数据管理是集中的

C/S结构

* 客户端负责数据表示服务
* 服务器负责数据库服务
* 数据库系统分为前后端
* ODBC, JDBC

分布式数据库

* 物理上分布，逻辑上集中
* 物理上分布，逻辑上分布
* 特点
* 透明性

并行数据库（了解

* 共享内存式
* 无共享式



### 分布式数据库特点（可用性重点）

![image-20240914094420699](https://s2.loli.net/2024/09/18/gcOhY83PDltqKe2.png)

### 分布式数据库透明性

![image-20240914094620710](C:\Users\Mrliu\AppData\Roaming\Typora\typora-user-images\image-20240914094620710.png)

![image-20240914094701356](C:\Users\Mrliu\AppData\Roaming\Typora\typora-user-images\image-20240914094701356.png)

DA

![image-20240914094848370](https://s2.loli.net/2024/09/14/KUVN7SZdGjRcCHQ.png)

系统瘫痪 ————可用性



### 考点2：三级模式结构

三级模式和两级映像

![image-20240914100617850](C:\Users\Mrliu\AppData\Roaming\Typora\typora-user-images\image-20240914100617850.png)

* 内模式——存储模式
* 外模式——用户模式
* 概念模式——模式（基本表）
* 对外给视图，修改映射关系，可以保证应用的调用
* 逻辑独立性——数据的逻辑结构发生变化后，用户程序也可以不修改，但是为了保证应用程序能够正确执行，需要修改外模式和概念模式之间的映像。
* 物理独立性——当数据的物理结构发生改变时（换磁盘），英勇程序不用改变。但是为了能够保证应用程序能够正确执行，需要修改概念模式和内模式之间的映像。

![image-20240920115756118](https://s2.loli.net/2024/09/20/qYVadbDmRGQhWz1.png)

> B

![image-20240920115856723](https://s2.loli.net/2024/09/20/naDEKcbxm3GzpRO.png)

> B

![image-20240920120107653](https://s2.loli.net/2024/09/20/i7fdgVDoJIuTLSv.png)

> D



### 考点3：数据仓库

![image-20240920120528330](https://s2.loli.net/2024/09/20/tMes2uF6WxUzSBl.png)

阶段1：数据预处理（ETL）

阶段2：数据仓库存储

阶段3：数据分析

阶段4：数据展现

![image-20240920120755531](https://s2.loli.net/2024/09/20/JbUCSytN8fWwoAs.png)

> 数据仓库属于OLAP（联机分析），不属于OLTP（联机事务，数据库）

![image-20240920120933220](https://s2.loli.net/2024/09/20/e9yjAPb6tl18EWh.png)

> B  多维度分析
>
> A数据清理
>
> C联机事务
>
> D数据抽取过程



## 2.数据库设计过程  

> 1分左右，下午题可能会出

![image-20240920121635407](https://s2.loli.net/2024/09/20/c7wYOPruszZUCSq.png)

* 数据流图——DFD
* 数据字典——DD
* 第一层抽象——ER模型
* 需求分析，概念结构设计，逻辑结构设计的产物
* 物理设计——聚覆索引

![image-20240920122303900](https://s2.loli.net/2024/09/20/zwiFDru7kPOtLoy.png)

> C
>
> - **A需求分析**：这个阶段主要是确定系统需要做什么，包括用户的需求和系统的功能需求。
> - **B概念设计**：在这个阶段，设计者会创建一个独立于具体数据库实现的概念模型，如实体-关系图（ER图）。
> - **C逻辑设计**：如上所述，是规范化过程发生的阶段。
> - **D物理设计**：这个阶段涉及到为特定DBMS实现选择存储结构、存取路径等物理层面的细节。



## 3.概念设计阶段

### 考点1：概念设计过程

![image-20240920150450850](https://s2.loli.net/2024/09/20/fMl2HRD6Aqsm9yt.png)

> 注意是同一对象





### 考点2：E-R图（下午题）

![image-20240920161208264](https://s2.loli.net/2024/09/20/uaNIsjRdLnUrKCJ.png)

![image-20240920162046125](https://s2.loli.net/2024/09/20/yvIfN4BgVdAwO3e.png)

![image-20240920162524377](https://s2.loli.net/2024/09/20/jdYnSL7c4EamZ6r.png)

### 联系类型

#### 不同实体集之间的联系

![image-20240920163130705](https://s2.loli.net/2024/09/20/d7uMCnGo4t2ZNse.png)

* 一对多分为两种：一对多，多对一

两个以上不同实体集之间的联系（三元联系）多重度的确定（可根据语义直接转换）

以三元关系中的一个实体作为中心，假设 另两个实体都只有一个实例：
若中心实体只有一个实例能与另两个 实体的一个实例进行关联，则中心实体的 连通数为`一`
若中心实体有多于一个实例能与另两 个实体实例进行关联，则中心实体的连通 数为`多`

![image-20240920164143317](https://s2.loli.net/2024/09/20/7BxRMdZ4nKwWakh.png)

* 以病房为中心
* 病人住在一个病房，医生管理一个病房
* 所以病房端是1
* 以病人为中心，一个病房住多个病人，一个医生也治疗多个病人
* 有一端是多，就是多，所以病人是n
* 以医生为中心，一个病房对应一个医生，但是一个病人对应多个医生
* 有一端是多，就是多，所以医生是m
* 整体来说，表示一个病房有多个病人和多个医生，一个医生值负责一个病房，一个病人只属于一个病房。

![image-20240920164731529](https://s2.loli.net/2024/09/20/wZ3U6svfBKJSgQ8.png)

* 供应商，项目，零件
* 表示供应 商为多个项目供 应多种零件，每 个项目可用多个 供应商供应的零 件，每种零件可 由不同的供应商 供应。

#### 同一个实体集内的二元联系

![image-20240920165152107](https://s2.loli.net/2024/09/20/xHQjFUMORLA4KDw.png)

* 主队和客队都属于球队



### 扩展的E-R模型（弱实体，特殊化，聚集）

* 弱实体：在现实世界中有一种特殊的依赖联系，该联系是指某实体是否存在对于另 一些实体具有很强的依赖关系，即一个实体的存在必须以另一个实体为前提，而将这 类实体称为弱实体，如家属与职工的联系，附件与邮件。
* 用两个嵌套的矩形表示

![image-20240920165358014](https://s2.loli.net/2024/09/20/wiGn5VLAZxKX6oe.png)

* 特殊化：在现实世界中，某些实体一方面具有一些共性，另一方面还具有各自的特 性，一个实体集可以按照某些特征区分为几个子实体。
* 用圈联系，用两条平行线联系

![image-20240920165525217](https://s2.loli.net/2024/09/20/3A5XsarHmWI9MGP.png)

* 聚集：一个联系作为另一个联系的一端。

![image-20240920165646737](https://s2.loli.net/2024/09/20/IA1Jqe6UadtmvQZ.png)



## 4.逻辑结构设计

### 考点1：关系模式相关概念

* 属于数据模型的一种

* 数据模型包括：层次，网状，关系，面向对象模型
* 数据模型三要素：数据结构，数据操作，数据的约束条件

* 关系模式：二维表，属性为列名

#### 关系模式概念

* 目或度：关系模式中属性的个数。
* 候选码：候选键，唯一标识元组，且无冗余，可以是属性的集合（包含一个或多个属性）
* 对于`学生（学号，姓名，身份证号）` 来说，若将`学号，身份证号`确定为候选码，则出现冗余。因为单独得学号或是身份证号就可以作为候选码，正确的候选码应该是有两个：学号或是身份证号。
* 可以从候选键中选择一个作为主码（键）
* 主属性：组成候选码的属性就是主属性，其他的就是非主属性。
* 外码（外键）：其他关系的主键。
  * 例如：成绩（学号，分数），学号是学生的主键，也是成绩的外键。
* 全码（ALL-key）：关系模式的所有属性组是这个关系的候选码。

#### 关系模式的3种类型

* 基本关系
* 查询表
* 视图表

#### 完整性约束

* 实体完整性约束：主键唯一，非空
* 参照完整性约束：外键要么是其他关系的主键，要么是空
* 用户自定义完整性约束
* 触发器：完成一些复杂的完整性约束的设定，针对某种事件进行监听。

### 考点2：E-R图转关系模式

![image-20240921143054807](https://s2.loli.net/2024/09/21/pmz2LqRJgDAcEds.png)

联系转成关系模式：

* 一对一的联系，转换有两种方式
  * 独立的关系模式：并入两端主键及联系自身属性。（主键：任一端主键）
  * 归并（任意一端）：并入另一端主键及联系自身属性。（主键：保持不变）
* ![image-20240921144235789](https://s2.loli.net/2024/09/21/GMIa7DgscLTJk1b.png)
  * 不是任意归并，而是归并到多的一端
* ![image-20240921144348976](https://s2.loli.net/2024/09/21/D2h6BqRmEcVbxdN.png)

题：一对一

![image-20240921144454449](https://s2.loli.net/2024/09/21/ud7Msa3z6wgYe8P.png)

对于一对一关系“任职”来说

转为单独的关系模式：

![image-20240921144615140](https://s2.loli.net/2024/09/21/uEWqphBxgkYAvS7.png)

并入：关系“任职”并入到校长关系中，同时并入另一端关系的主键“校名”

![image-20240921144715504](https://s2.loli.net/2024/09/21/w4bPMrEAQ518pVk.png)

题：一对多

![image-20240921144858587](https://s2.loli.net/2024/09/21/7Gj2kBafXiDwTCp.png)

独立的关系模式：**以多端的主键作为自身的主键**

![image-20240921144957069](https://s2.loli.net/2024/09/21/WE12nw4kSCVYMgm.png)

并入到多端（账户）：

![image-20240921145240417](https://s2.loli.net/2024/09/21/fGpRAbLXZENYmvP.png)



题：多对多

![image-20240921150134754](https://s2.loli.net/2024/09/21/dNxkRIt18CYgcZU.png)

单独作为一个关系：主键由两端的主键组成

![image-20240921150201800](https://s2.loli.net/2024/09/21/Rk3eKtyiP7ozUhG.png)

总结：考试以二元联系为主

![image-20240921150558108](https://s2.loli.net/2024/09/21/NmEeJTyZcbaGvsA.png)



## 5.关系代数

对于一个关系表，

* 垂直为属性列，称为目、度。
* 水平为元组行，记录、实例。

![image-20240921151051301](https://s2.loli.net/2024/09/21/XG3kNTx1MuK8yhj.png)

![image-20240921151205206](https://s2.loli.net/2024/09/21/MvIbdgnVQuzwlaG.png)

差：S1 - S2和 S2 - S1是不一样的，减去的是两个关系的交集

### 笛卡尔积X

![image-20240921152229001](https://s2.loli.net/2024/09/21/Vslny6L823vkNfo.png)

* 属性列数：两者之和
* 元组个数：两者之积，排列组合

### 投影Π

垂直方向选择数据，会修改表结构

![image-20240921153551316](https://s2.loli.net/2024/09/21/Z5CN2a3LlPvRoKe.png)

### 选择 

水平方向选择数据，不会修改表结构

直接根据列名进行筛选

![image-20240921153656943](https://s2.loli.net/2024/09/21/tAPb4klS9BHI3FE.png)

或是根据两个列之间值相同来筛选，例如，对于S1XS2

![QianJianTec1726904610076](https://s2.loli.net/2024/09/21/QAaze1HRoIbvnV5.png)

选择第一列和第四列值相同的元组



### 自然连接

* 属性列数：二者之和 - 重复列数

* 元组行数：同名属性列取值相等

![image-20240921153751672](https://s2.loli.net/2024/09/21/JREPnltXOcv9fr1.png)

### 选择与投影的先后关系

![image-20240921155054181](https://s2.loli.net/2024/09/21/BevSbO6VfnDKq4I.png)



![QianJianTec1726904748559](https://s2.loli.net/2024/09/21/jQvaUT4PJeD95AN.png)

与自然连接$$S1\Join S2$$等价

![QianJianTec1726904789335](https://s2.loli.net/2024/09/21/PkxKbZVRc3nCrGY.png)

与自然连接$$S1\Join S2$$ 不等价

规则：

* 尽可能的先压缩
* 性能最优
  * 两侧运算对象，运算表格尽可能小

例题

![image-20240921155710740](https://s2.loli.net/2024/09/21/7uF1KYvViTc6hjM.png)

> CB

对于D选项的 `2 > ‘7’` 单引号的7不代表第七列，而是值7

![image-20240921161751697](https://s2.loli.net/2024/09/21/rp3AuZijSNzal5q.png)

> D 先按条件筛选，缩小后再进行笛卡尔积



## 规范化理论

### 考点1：规范化理论基本概念

#### 函数依赖

![image-20240921163532424](https://s2.loli.net/2024/09/21/kTEPMfbt2Zd1vX3.png)

* X为决定因素，Y是被决定因素

![image-20240921164828736](https://s2.loli.net/2024/09/21/2MOxNFRm5SdXHB9.png)

#### Amstrong公理体系

![image-20240921164924534](https://s2.loli.net/2024/09/21/3jQy4IK7evgWkps.png)

![image-20240921165045067](https://s2.loli.net/2024/09/21/Tqc7x9Atva63F4Y.png)

#### 候选键⭐

> 唯一标识元组，无冗余

从候选键中任选一个，为主键

![image-20240921170128067](https://s2.loli.net/2024/09/21/wUFIBtxvnL5Cohr.png)





### 考点2：范式判断

### 考点3：模式分解